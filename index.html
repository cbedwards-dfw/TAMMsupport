<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Streamline working with Terminal Area Management Modules • TAMMsupport</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Streamline working with Terminal Area Management Modules">
<meta name="description" content="A convenient tool for interfacing with Terminal Area Manamagement Modules (TAMMs) in R environments.">
<meta property="og:description" content="A convenient tool for interfacing with Terminal Area Manamagement Modules (TAMMs) in R environments.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">TAMMsupport</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cbedwards-dfw/TAMMsupport/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="tammsupport">TAMMsupport<a class="anchor" aria-label="anchor" href="#tammsupport"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <a href="https://framverse.r-universe.dev/TAMMsupport" class="external-link">TAMMsupport</a> is to provide R-based tools for working with and interpreting Terminal Area Management Module files (<a href="https://framverse.github.io/fram_doc/calcs_glossary.html#Terminal_Area_Management_Module_(TAMM)" class="external-link uri">https://framverse.github.io/fram_doc/calcs_glossary.html#Terminal_Area_Management_Module_(TAMM)</a>).</p>
<p><a href="https://framverse.r-universe.dev/TAMMsupport" class="external-link">TAMMsupport</a> is part of the <a href="https://framverse.r-universe.dev/packages" class="external-link">“framverse” R universe of packages</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the compiled version of <a href="https://framverse.r-universe.dev/TAMMsupport" class="external-link">TAMMsupport</a> through the R-universe package repository:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TAMMsupport"</span>, <span class="st">"xldiff"</span><span class="op">)</span>, repos <span class="op">=</span> <span class="st">"https://framverse.r-universe.dev"</span><span class="op">)</span></span></code></pre></div>
<p>If you have RTools installed, you can also install the the package from the github repository with</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"cbedwards-dfw/TAMMsupport"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## OR</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"cbedwards-dfw/TAMMsupport"</span><span class="op">)</span>    </span></code></pre></div>
<p>To install the development version, which may include new features that have been added but not thoroughly tested:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"cbedwards-dfw/TAMMsupport@dev"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cheatsheet">Cheatsheet<a class="anchor" aria-label="anchor" href="#cheatsheet"></a>
</h2>
<p>I want to…</p>
<ul>
<li>Summarize and visualize key aspects of a Chinook TAMM? Use <code><a href="reference/tamm_report.html">tamm_report()</a></code>. (OR, even better, check out the <a href="https://cbedwards-dfw.github.io/crayolaTAMM/" class="external-link">crayolaTAMM package!</a>)</li>
<li>compare two Chinook TAMM files to look for changes in inputs or results? Use <code><a href="reference/tamm_diff.html">tamm_diff()</a></code>.</li>
<li>compare two or more Chinook TAMM files (e.g. look across three ocean options) to see how ER varies by stock and fishery between the models? Use <code><a href="reference/tamm_compare.html">tamm_compare()</a></code>.</li>
<li>extract the overview sheet info from a Chinook TAMM? Use <code><a href="reference/read_overview.html">read_overview()</a></code> or <code><a href="reference/read_overview_complete.html">read_overview_complete()</a></code>.</li>
<li>extract the limiting stock complete sheet from a Chinook TAMM? Use <code><a href="reference/read_limiting_stock.html">read_limiting_stock()</a></code> or <code><a href="reference/clean_limiting_stock.html">clean_limiting_stock()</a></code>. If desired, use <code><a href="reference/filter_tamm_wa.html">filter_tamm_wa()</a></code> to then filter the results to just Washington fisheries.</li>
<li>extract the ER and AEQ of the <code>2A_C*</code> and <code>JDF</code> tabs? Use <code><a href="reference/read_2a_sheets.html">read_2a_sheets()</a></code> and <code><a href="reference/read_jdf.html">read_jdf()</a></code> respectively.</li>
<li>Trace the network of cells used by a formula in a TAMM or other excel file? Use <code><a href="reference/trace_formula.html">trace_formula()</a></code> to generate a dependency network, and <code><a href="reference/make_tracer_network.html">make_tracer_network()</a></code> to visualize it.</li>
</ul>
</div>
<div class="section level2">
<h2 id="tamm_diff">
<code>tamm_diff()</code><a class="anchor" aria-label="anchor" href="#tamm_diff"></a>
</h2>
<p><code><a href="reference/tamm_diff.html">tamm_diff()</a></code> facilitates comparing the outputs and inputs of two tamm files by identifying changes in cell values in the overview, limiting stock complete, and input sheets. <code>tamm_diff</code> then creates a “diff” excel file that contains the contents of those three sheets, highlighting the changed cells. The formatting of the diff file broadly reflects that of the Chinook TAMM, but with simpler border and highlighting choices.</p>
<p><code><a href="reference/tamm_diff.html">tamm_diff()</a></code> takes three arguments: the names of the first TAMM file, the second tamm file, and the name to give the resulting file (in all cases, the name should include filepath, if relevant). All three filenames should end in “.xlsx”. The following is an example use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/tamm_diff.html">tamm_diff</a></span><span class="op">(</span>file_1 <span class="op">=</span> <span class="st">"Chin1124.xlsx"</span>,</span>
<span>          file_2 <span class="op">=</span> <span class="st">"Chin2524.xlsx"</span>,</span>
<span>          results_name <span class="op">=</span> <span class="st">"comparison of Chin 1124 vs 2524.xlsx"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>By default, <code><a href="reference/tamm_diff.html">tamm_diff()</a></code> flags changes that were at least 0.1% of the value in <code>file_1</code> (or, if that value was zero, to within an absolute value of 0.001). In some cases, we may want to solely focus on larger changes (e.g. changes in whole fish). We can change the minimum threshold for proportional change with with the argument <code>proportional_threshold</code>: a value of 0.1 would mean only flagging changes of 10% or greater, and a value of 0.01 would flag change of 1% or greater.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/tamm_diff.html">tamm_diff</a></span><span class="op">(</span>file_1 <span class="op">=</span> <span class="st">"Chin1124.xlsx"</span>,</span>
<span>          file_2 <span class="op">=</span> <span class="st">"Chin2524.xlsx"</span>,</span>
<span>          results_name <span class="op">=</span> <span class="st">"comparison of Chin 1124 vs 2524.xlsx"</span>,</span>
<span>          proportional_threshold <span class="op">=</span> <span class="fl">0.01</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, we might want to use an absolute threshold (e.g., if we were only interested in entries of fish, we might want to flag changes of 1 or more fish). By providing a value to the optional argument <code>absolute_threshold</code>, we override the use of <code>proportional_threshold</code>, and the difference will flag any difference of absolute magnitude <code>proprotional_threshold</code>. Here’s an example that flags changes of at least 1:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/tamm_diff.html">tamm_diff</a></span><span class="op">(</span>file_1 <span class="op">=</span> <span class="st">"Chin1124.xlsx"</span>,</span>
<span>          file_2 <span class="op">=</span> <span class="st">"Chin2524.xlsx"</span>,</span>
<span>          results_name <span class="op">=</span> <span class="st">"comparison of Chin 1124 vs 2524.xlsx"</span>,</span>
<span>          absolute_threshold <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="working-with-limiting-stock-sheet">Working with limiting stock sheet<a class="anchor" aria-label="anchor" href="#working-with-limiting-stock-sheet"></a>
</h2>
<p><code><a href="reference/read_limiting_stock.html">read_limiting_stock()</a></code> reads in the limiting stock sheet of a TAMM file and applies some minimal formatting and filtering (notably, combining into a single table with variable <code>stock_type</code> to distingish hatchery and natural, unmarked and natural; giving categorization of fisheries).</p>
<p><code><a href="reference/clean_limiting_stock.html">clean_limiting_stock()</a></code> does everything read_limiting stock does, but then filters to unmarked naturals, filters out AEQ entries, and provides the results in a long-form table that is ready for plotting or analysis of exploitation rates.</p>
<p><code>filter_tamm_wa</code> filters a limiting stock dataframe (e.g. the output of <code>read_limiting_stock or</code> <code>clean_limiting_stock</code>) to just Washington fisheries. <code>filter_tamm_wa</code> looks for a <code>species</code> attribute in the dataframe (in line with This function can be included in a pipe, consistent with the filtering approaches in the <code>framrsquared package</code>. Unless you add that attribute to your data frame, it makes more sense to call <code><a href="reference/filter_tamm_wa.html">filter_tamm_wa_chin()</a></code> (for chinook TAMMs) or <code><a href="reference/filter_tamm_wa.html">filter_tamm_wa_coho()</a></code> (for Coho tamms)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/clean_limiting_stock.html">clean_limiting_stock</a></span><span class="op">(</span><span class="st">"Chin1224.xlsx"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/filter_tamm_wa.html">filter_tamm_wa_chin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">timestep</span> <span class="op">==</span> <span class="st">"yr"</span><span class="op">)</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">stock</span>, y <span class="op">=</span> <span class="va">er</span>, fill <span class="op">=</span> <span class="va">Fishery</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu">geom_bar</span><span class="op">(</span>position<span class="op">=</span><span class="st">"stack"</span>, stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="working-with-other-chinook-sheets">Working with other Chinook sheets<a class="anchor" aria-label="anchor" href="#working-with-other-chinook-sheets"></a>
</h2>
<ul>
<li>
<code><a href="reference/read_2a_sheets.html">read_2a_sheets()</a></code> parses the sheets “2A_Cmrkd”, “2A_CUnmrkd”, “2A_CUandM” and “2A_CUandM_N”, extracts the AEQs and ERs, and labels them with the appropriate stocks and fisheries. This makes it much easier to writes scripts that depend on these values. It returns a list with <code>$AEQ</code> (all the AEQ values in tabular form) and <code>$ER</code> (all the ER values in tabular form)</li>
<li>
<code><a href="reference/read_jdf.html">read_jdf()</a></code> is analogous to <code><a href="reference/read_2a_sheets.html">read_2a_sheets()</a></code> but parses the AEQ information in the “JDF” sheet. For compatibility reasons it also returns a list with <code>$AEQ</code> and <code>$ER</code> like <code><a href="reference/read_2a_sheets.html">read_2a_sheets()</a></code> does, but as there is not a bottom bar with ER values on the JDF sheet, the <code>$ER</code> entry is empty</li>
</ul>
</div>
<div class="section level2">
<h2 id="tamm_report">
<code>tamm_report()</code><a class="anchor" aria-label="anchor" href="#tamm_report"></a>
</h2>
<p><code><a href="reference/tamm_report.html">tamm_report()</a></code> summarizes key aspects of a single Chinook TAMM file in an html report, which is generated in the same folder as the summarized TAMM.</p>
<p>Under the hood, tamm_report() uses a template parameterized quarto report and a child quarto file to help automate the creation of tabs for each stock. To see the underlying quarto files used (e.g., to suggest additional edits or features), set argument <code>clean = FALSE</code> when calling <code><a href="reference/tamm_report.html">tamm_report()</a></code>. This will prevent the deletion of <code>tamm-visualizer.qmd</code> and <code>tamm-visualizer-child.qmd</code>, which will be leftin the same folder as the TAMM and report.</p>
</div>
<div class="section level2">
<h2 id="tamm_compare">
<code>tamm_compare()</code><a class="anchor" aria-label="anchor" href="#tamm_compare"></a>
</h2>
<p><code><a href="reference/tamm_compare.html">tamm_compare()</a></code> uses the same general approach as <code><a href="reference/tamm_report.html">tamm_report()</a></code>, but creates a report to compare any number TAMM files based off of Yi Xu’s Rmarkdown report to compare exploitation rates for three ocean options. The optional argument <code>fisheries</code> takes a numeric vector of fishery IDs; visualization of stock ERs will only plot those ERs. If <code>fisheries</code> is not provided, for each stock <code><a href="reference/tamm_compare.html">tamm_compare()</a></code> will create a figure of impacts from all fisheries, and a separate plot of impacts from all SUS fisheries.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cbedwards-dfw/TAMMsupport/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing TAMMsupport</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Collin Edwards <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4937-5159" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Ty Garber <br><small class="roles"> Author </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cbedwards-dfw/TAMMsupport/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/cbedwards-dfw/TAMMsupport/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/cbedwards-dfw/TAMMsupport" class="external-link"><img src="https://codecov.io/gh/cbedwards-dfw/TAMMsupport/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Collin Edwards, Ty Garber.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
